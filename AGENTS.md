# AGENTS.md

このドキュメントは、AIエージェントがこのプロジェクトを理解し、適切に作業するためのガイドラインです。

## プロジェクト概要

このプロジェクトは、社員の勤怠管理システムです。FlaskとMySQLを使用したWebアプリケーションをDockerコンテナ上で実行します。
社員の出勤・退勤記録、勤怠状況の管理、レポート生成などの機能を提供します。

## 技術スタック

- **バックエンドフレームワーク**: Flask 2.1.0
- **データベース**: MySQL
- **コンテナ環境**: Docker & Docker Compose
- **Pythonバージョン**: 3.10

## システム機能

### 機能一覧

#### 1. 社員認証機能
- メールアドレスとパスワードによるログイン
- ログアウト機能
- セッション管理

#### 2. 勤怠入力機能（社員・課長共通）
- 日別の勤怠情報入力
  - 出勤時間（15分単位）
  - 退勤時間（15分単位）
  - 休憩時間（15分単位）
  - 特記事項
  - 出勤区分（出勤、遅刻、早退、午前休、午後休、一日休）
  - プロジェクト毎の作業時間記録

#### 3. 社員管理機能（課長のみ）
- 社員のCRUD機能（作成・読み取り・更新・削除）
- 社員一覧表示
- 社員情報の編集・削除

#### 4. 月次レポート機能（課長のみ）
- 月次レポートの出力
- 勤怠データの集計・表示

### 認証方法

- **認証方式**: メールアドレスとパスワード
- **ログイン情報**:
  - メールアドレス（社員のメールアドレス）
  - パスワード（各社員のパスワード）

### 権限管理

システムは以下の2つの権限レベルで構成されます：

#### 社員権限
- 勤怠登録のみ可能
- 自分の勤怠情報の入力・確認

#### 課長権限
- 勤怠登録（社員と同等）
- 社員のCRUD機能（作成・読み取り・更新・削除）
- 月次レポートの出力
- 社員管理機能全般

### 勤怠管理の詳細

#### 記録項目（日別）
- **出勤時間**: 15分単位で記録
- **退勤時間**: 15分単位で記録
- **休憩時間**: 15分単位で記録
- **特記事項**: テキストで記録
- **出勤区分**: 以下のいずれかを選択
  - 出勤
  - 遅刻
  - 早退
  - 午前休
  - 午後休
  - 一日休
- **プロジェクト毎の作業時間**: プロジェクト単位で作業時間を記録

#### 時間の扱い
- すべての時間は15分単位で管理
- 例: 09:00, 09:15, 09:30, 09:45 など

## プロジェクト構造

```
work_report/
├── compose.yaml          # Docker Compose設定ファイル
├── Dockerfile           # Flaskアプリケーション用のDockerイメージ定義
├── src/
│   └── app.py          # Flaskアプリケーションのメインファイル
└── AGENTS.md           # このファイル
```

## 重要なファイル

### compose.yaml
- Docker Composeサービスの定義
- Webアプリケーションサービスの設定
- ポートマッピング（5000:5000）
- ボリュームマウント設定

### Dockerfile
- Python 3.10ベースイメージ
- Flask 2.1.0のインストール
- アプリケーションの実行設定

### src/app.py
- Flaskアプリケーションのエントリーポイント
- ルーティング設定（勤怠記録、認証、レポートなど）
- アプリケーションロジック
- 勤怠管理システムのコア機能

## 開発ガイドライン

### コードスタイル

1. **コメント**: 
   - すべてのクラスには日本語のクラスコメントを記述してください
   - すべてのメソッドには日本語のメソッドコメントを記述してください
   - docstringのコメントを記述してください

2. **実行環境**:
   - プログラムの実行は必ずDockerコンテナ上で行います
   - ローカル環境での直接実行は避けてください

3. **テストと動作確認**:
   - 製造したら必ずテストを作成して動作確認をしてください
   - テストコードは適切なテストフレームワークを使用して記述してください

4. **バージョン管理**:
   - コミット及びプッシュ時のコメントは日本語で記述してください
   - プルリクしたときのレビューコメントも日本語で記述してください

### Dockerコンテナでの作業

```bash
# コンテナのビルドと起動
docker compose up --build

# バックグラウンドで起動
docker compose up -d

# コンテナの停止
docker compose down
```

## 注意事項

- MySQLサービスの設定がcompose.yamlに含まれていない場合、必要に応じて追加が必要です
- 環境変数の設定はcompose.yamlのenvironmentセクションで管理します
- ソースコードの変更は、ボリュームマウントによりリアルタイムで反映されます
- 設計書については、docsフォルダ配下の設計書一覧.mdファイルを参照すること
- 必要に応じて、README.mdファイルも更新すること

## 今後の拡張予定

### インフラ・開発環境
- MySQLサービスとの連携設定
- データベースマイグレーション設定
- 環境変数ファイル（.env）の追加
- requirements.txtによる依存関係管理

### 機能拡張（将来の拡張予定）
- 残業時間の自動計算機能
- 年次レポート機能
- 給与計算システムとの連携
- 申請・承認機能（有休申請、残業申請など）
- 勤怠データの承認・修正機能（管理者による）

